{
    "if": {
        "allOf": [
            {
                // checking the resource type
                // rg-amf-cer-d-eus-001
                "allOf": [
                    {
                        "field": "type",
                        "in": ["Microsoft.Resources/resourceGroups"]
                    },
                    {
                        "not": {
                            "value": "[substring(field('name'), 0, 2)]",
                            "in": ["am", "amf", "as", "em"]
                        }
                    },
                    {
                        "not": {
                            "value": "[substring(field('name'), 0, 3)]",
                            "in": ["am", "amf", "as", "em"]
                        }
                    },
                    {
                        "not": {
                            "value": "[substring(field('name'), 0, 4)]",
                            "in": ["am", "amf", "as", "em"]
                        }
                    }
                ]
            },
            {
                // checking the Unit /Dept
                // rg-amf-cer-d-eus-001
                "allOf": [
                    {
                        "field": "type",
                        "in": ["Microsoft.Resources/resourceGroups"]
                    },
                    {
                        "not": {
                            "value": "[substring(field('name'), 3, 1)]",
                            "in": ["am", "amf", "as", "em"]
                        }
                    },
                    {
                        "not": {
                            "value": "[substring(field('name'), 3, 2)]",
                            "in": ["am", "amf", "as", "em"]
                        }
                    },
                    {
                        "not": {
                            "value": "[substring(field('name'), 3, 3)]",
                            "in": ["am", "amf", "as", "em"]
                        }
                    }
                ]
            }
        ]
    },
    "then": {
        "effect": "deny"
    }
}